{"version":3,"sources":["../../../client/components/auth/interceptor.service.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;;AAEb,CAAC,YAAW;;AAEZ,WAAS,eAAe,CAAC,UAAU,EAAE,EAAE,EAAE,QAAQ,EAAE,SAAS,EAAE,IAAI,EAAE;AAClE,QAAI,KAAK,CAAC;AACV,WAAO;;AAEL,aAAO,EAAA,iBAAC,MAAM,EAAE;AACd,cAAM,CAAC,OAAO,GAAG,MAAM,CAAC,OAAO,IAAI,EAAE,CAAC;AACtC,YAAI,QAAQ,CAAC,GAAG,CAAC,OAAO,CAAC,IAAI,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE;AAC1D,gBAAM,CAAC,OAAO,CAAC,aAAa,GAAG,SAAS,GAAG,QAAQ,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;SAClE;AACD,eAAO,MAAM,CAAC;OACf;;;AAGD,mBAAa,EAAA,uBAAC,QAAQ,EAAE;AACtB,YAAI,QAAQ,CAAC,MAAM,KAAK,GAAG,EAAE;AAC3B,WAAC,KAAK,KAAK,KAAK,GAAG,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAA,CAAC,CAAE,EAAE,CAAC,OAAO,CAAC,CAAC;;AAEzD,kBAAQ,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;SAC1B;AACD,eAAO,EAAE,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;OAC5B;KACF,CAAC;GACH;;AAED,SAAO,CAAC,MAAM,CAAC,iBAAiB,CAAC,CAC9B,OAAO,CAAC,iBAAiB,EAAE,eAAe,CAAC,CAAC;CAE9C,CAAA,EAAG,CAAC","file":"interceptor.service.js","sourcesContent":["'use strict';\n\n(function() {\n\nfunction authInterceptor($rootScope, $q, $cookies, $injector, Util) {\n  var state;\n  return {\n    // Add authorization token to headers\n    request(config) {\n      config.headers = config.headers || {};\n      if ($cookies.get('token') && Util.isSameOrigin(config.url)) {\n        config.headers.Authorization = 'Bearer ' + $cookies.get('token');\n      }\n      return config;\n    },\n\n    // Intercept 401s and redirect you to login\n    responseError(response) {\n      if (response.status === 401) {\n        (state || (state = $injector.get('$state'))).go('login');\n        // remove any stale tokens\n        $cookies.remove('token');\n      }\n      return $q.reject(response);\n    }\n  };\n}\n\nangular.module('bhcmartApp.auth')\n  .factory('authInterceptor', authInterceptor);\n\n})();\n"]}