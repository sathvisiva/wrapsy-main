{"version":3,"sources":["../../../client/components/navbar/navbar.controller.js"],"names":[],"mappings":"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","file":"navbar.controller.js","sourcesContent":["'use strict';\n\nclass NavbarController {\n\n\n\n  isCollapsed = true;\n  //end-non-standard\n\n  constructor(Auth, Catalog, $scope, $mdDialog, $state, $stateParams, $mdMedia) {\n    $scope.isLoggedIn = Auth.isLoggedIn;\n    $scope.isAdmin = Auth.isAdmin;\n    $scope.getCurrentUser = Auth.getCurrentUser;\n    $scope.customFullscreen = $mdMedia('xs') || $mdMedia('sm');\n\n    $scope.showSearch = false;\n\n    $scope.toggleSearch = function(){\n      if($scope.showSearch){\n        $scope.showSearch = false;\n      }else{\n        $scope.showSearch = true;\n      }\n    }\n\n    $scope.getcategories = function(parentid){\n      var q = {where:{parent:parentid}};\n      return Catalog.query(q);\n    }\n\n    $scope.buildnavbar = function(){\n      $scope.tree = [];\n      Catalog.query(function(categories) {\n        $scope.categories = categories;\n        $scope.parentCategories = _.filter(categories, function(category) {\n          return category.ancestors.length == 1;\n        })\n\n        angular.forEach($scope.parentCategories, function(value, key){\n\n          var parentcateogry = {\n            \"name\" : value.name,\n            \"slug\" : value.slug,\n            \"id\" : value._id\n          }\n          if(value.children.length > 0){\n            parentcateogry.subtree = [];\n            angular.forEach(value.children, function(id, key){\n              $scope.subCategories = _.filter($scope.categories, function(category) {\n                return category._id == id;\n              })\n\n              if($scope.subCategories.length>0){\n                var subcategory = {\n                  \"name\" : $scope.subCategories[0].name,\n                  \"slug\" : $scope.subCategories[0].slug,\n                  \"id\" : $scope.subCategories[0]._id\n\n                }\n                if($scope.subCategories[0].children && $scope.subCategories[0].children.length > 0){\n                  subcategory.subtree = [];\n                  angular.forEach($scope.subCategories[0].children, function(id, key){\n                    $scope.subsubCategories = _.filter($scope.categories, function(category) {\n                      return category._id == id;\n                    })\n\n                    if($scope.subsubCategories.length>0){\n                      var subsubcategory = {\n                        \"name\" : $scope.subsubCategories[0].name,\n                        \"slug\" : $scope.subsubCategories[0].slug,\n                        \"id\" : $scope.subsubCategories[0]._id\n\n                      }\n                      subcategory.subtree.push(subsubcategory)\n                    }\n\n\n\n\n                  })\n\n                }\n\n              }\n\n              parentcateogry.subtree.push(subcategory)\n            })\n\n          }\n          $scope.tree.push(parentcateogry);\n        });\n      });\n    }\n\n    $scope.buildnavbar();\n\n    $scope.showsubtree = false;\n\n    $scope.showsusubtree = false;\n\n    $scope.expandsubtree = function(){\n      $scope.showsubtree = ! $scope.showsubtree;\n    }\n\n\n    $scope.expandsusubtree = function(){\n      $scope.showsusubtree = ! $scope.showsusubtree;\n    }\n\n    $scope.openNav = function(){\n      console.log(\"inside openNav\");\n      document.getElementById(\"mySidenav\").style.width = \"250px\";\n    }\n\n    $scope.closeNav = function(){\n      console.log(\"inside closenav\");\n      document.getElementById(\"mySidenav\").style.width = \"0\";\n    }\n\n    /*function openNav() {\n      document.getElementById(\"mySidenav\").style.width = \"250px\";\n    }*/\n/*\n    function closeNav() {\n      document.getElementById(\"mySidenav\").style.width = \"0\";\n    }*/\n\n\n    $scope.createRegistry = function(ev){\n      if($scope.isLoggedIn()){\n        $state.go('createregistry.registryType');\n      }else{\n        $scope.data = {'state' : 'createregistry.registryType' , 'event' : 'login'};\n        $scope.login(ev, $scope.data);\n      }\n    }\n\n    $scope.login = function(ev,data) {\n      var useFullScreen = ($mdMedia('sm') || $mdMedia('xs'))  && $scope.customFullscreen;\n      $mdDialog.show({\n        controller: 'LoginController'\n        , templateUrl: 'app/account/login/login.html'\n        , parent: angular.element(document.body)\n        , targetEvent: ev\n        , fullscreen: useFullScreen\n        , clickOutsideToClose: true\n        , locals: {\n          dataToPass: data\n        }\n      });\n\n      $scope.$watch(function() {\n        return $mdMedia('xs') || $mdMedia('sm');\n      }, function(wantsFullScreen) {\n        $scope.customFullscreen = (wantsFullScreen === true);\n      });\n    }\n\n    \n  }\n\n\n\n\n\n}\n\nangular.module('bhcmartApp')\n.controller('NavbarController', NavbarController);\n"]}