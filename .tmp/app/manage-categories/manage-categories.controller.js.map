{"version":3,"sources":["../../../client/app/manage-categories/manage-categories.controller.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;;AAEb,OAAO,CAAC,MAAM,CAAC,YAAY,CAAC,CAC3B,UAAU,CAAC,sBAAsB,EAAE,CAAC,QAAQ,EAAE,SAAS,EAAE,OAAO,EAC/D,UAAS,MAAM,EAAE,OAAO,EAAE,KAAK,EAAE;;AAO/B,SAAO,CAAC,KAAK,CAAC,UAAS,UAAU,EAAE;AACjC,UAAM,CAAC,UAAU,GAAG,UAAU,CAAC;;AAE7B,UAAM,CAAC,WAAW,GAAG,CAAC,CAAC;AACvB,UAAM,CAAC,UAAU,GAAG,MAAM,CAAC,UAAU,CAAC,MAAM,CAAC;AAC7C,UAAM,CAAC,YAAY,GAAG,EAAE,CAAC;AACzB,UAAM,CAAC,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,UAAU,GAAG,MAAM,CAAC,YAAY,CAAC,CAAC;GACvE,CAAC,CAAC;;AAEL,QAAM,CAAC,aAAa,GAAG,KAAK,CAAC,OAAO,UAAO,CAAC,UAAS,CAAC,EAAE;AACtD,QAAI,CAAC,CAAC,IAAI,IAAI,KAAK,EAAE,OAAO;AAC5B,KAAC,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,EAAE,UAAS,IAAI,EAAE;AAC9B,aAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAA;AACjB,YAAM,CAAC,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;KAC3D,CAAC,CAAA;GACH,CAAC,CAAC;CACJ,CACA,CAAC,CAEH,UAAU,CAAC,0BAA0B,EAAE,CAAC,QAAQ,EAAE,QAAQ,EAAE,SAAS,EAAE,cAAc,EAAC,QAAQ,EAC7F,UAAS,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,YAAY,EAAE,MAAM,EAAE;;AAEtD,SAAO,CAAC,KAAK,CAAC,UAAS,UAAU,EAAE;AACjC,UAAM,CAAC,UAAU,GAAG,UAAU,CAAC;AAC/B,UAAM,CAAC,QAAQ,GAAG,OAAO,CAAC,GAAG,CAAC,EAAE,EAAE,EAAE,YAAY,CAAC,EAAE,EAAE,CAAC,CAAC;GACxD,CAAC,CAAC;;AAEH,QAAM,CAAC,MAAM,GAAG,UAAS,IAAI,EAAE;AAC7B,QAAI,IAAI,EAAE;AACR,YAAM,CAAC,MAAM,CAAC;AACZ,WAAG,EAAE,cAAc;AACnB,YAAI,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE;OACrB,CAAC,CAAC,IAAI,CAAC,UAAS,IAAI,EAAE;AACrB,YAAI,MAAM,CAAC,QAAQ,EAAE;;AAEnB,gBAAM,CAAC,QAAQ,CAAC,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC;SAE1C,MAAM;AACL,gBAAM,CAAC,QAAQ,GAAG,EAAE,QAAQ,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAA;SACnD;AACD,eAAO,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;OACxB,EAAE,UAAS,IAAI,EAAE;AAChB,cAAM,CAAC,QAAQ,GAAG,IAAI,CAAC,MAAM,GAAG,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;OAClD,EAAE,UAAS,GAAG,EAAE;AACf,YAAI,kBAAkB,GAAG,QAAQ,CAAC,KAAK,GAAG,GAAG,CAAC,MAAM,GAAG,GAAG,CAAC,KAAK,CAAC,CAAC;;OAEjE,CAAC,CAAC;KACN,CAAC;GACH,CAAA;;AAED,QAAM,CAAC,IAAI,GAAG,UAAS,IAAI,EAAE;AAC3B,QAAI,IAAI,CAAC,MAAM,EAAE;AACf,aAAO,CAAC,MAAM,CAAC,EAAE,EAAE,EAAE,MAAM,CAAC,QAAQ,CAAC,GAAG,EAAE,EAAE,MAAM,CAAC,QAAQ,EAAE,UAAS,IAAI,EAAE;AAC1E,eAAO,CAAC,GAAG,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;AAC7B,cAAM,CAAC,EAAE,CAAC,gCAAgC,CAAC,CAAC;OAC7C,EAAE,UAAS,GAAG,EAAE;AACf,eAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;OAClB,CAAC,CAAC;KACJ;GACF,CAAA;CACF,CACA,CAAC,CAEH,UAAU,CAAC,yBAAyB,EAAE,CAAC,QAAQ,EAAE,QAAQ,EAAE,SAAS,EAAE,cAAc,EAAC,QAAQ,EAC5F,UAAS,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,YAAY,EAAE,MAAM,EAAE;;AAEtD,SAAO,CAAC,KAAK,CAAC,UAAS,UAAU,EAAE;AACjC,UAAM,CAAC,UAAU,GAAG,UAAU,CAAC;GAChC,CAAC,CAAC;AACH,QAAM,CAAC,QAAQ,GAAG,EAAE,CAAA;;AAEpB,OAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE,EAAE;AAC3B,UAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC,GAAG,CAAC,EAAE,KAAK,EAAE,MAAM,GAAG,CAAC,CAAC,GAAG,CAAC,CAAA,CAAE,QAAQ,EAAE,EAAE,CAAC,CAAC;GAC1E;;AAED,QAAM,CAAC,OAAO,GAAG,CAAC,CAAC,EAAC,CAAC,EAAC,CAAC,CAAC,CAAC;AACzB,QAAM,CAAC,MAAM,GAAG,UAAS,IAAI,EAAE;AAC7B,QAAI,IAAI,EAAE;AACR,YAAM,CAAC,MAAM,CAAC;AACZ,WAAG,EAAE,cAAc;AACnB,YAAI,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE;OACrB,CAAC,CAAC,IAAI,CAAC,UAAS,IAAI,EAAE;AACrB,YAAI,MAAM,CAAC,QAAQ,EAAE;;AAEnB,gBAAM,CAAC,QAAQ,CAAC,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC;SAE1C,MAAM;AACL,gBAAM,CAAC,QAAQ,GAAG,EAAE,QAAQ,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAA;SACnD;AACD,eAAO,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;OACxB,EAAE,UAAS,IAAI,EAAE;AAChB,cAAM,CAAC,QAAQ,GAAG,IAAI,CAAC,MAAM,GAAG,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;OAClD,EAAE,UAAS,GAAG,EAAE;AACf,YAAI,kBAAkB,GAAG,QAAQ,CAAC,KAAK,GAAG,GAAG,CAAC,MAAM,GAAG,GAAG,CAAC,KAAK,CAAC,CAAC;;OAEjE,CAAC,CAAC;KACN,CAAC;GACH,CAAA;;AAED,QAAM,CAAC,IAAI,GAAG,UAAS,IAAI,EAAE;AAC3B,QAAI,IAAI,CAAC,MAAM,EAAE;AACf,aAAO,CAAC,GAAG,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAA;AAC5B,aAAO,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,UAAS,IAAI,EAAE;AAC3C,eAAO,CAAC,GAAG,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;AAC7B,cAAM,CAAC,EAAE,CAAC,gCAAgC,CAAC,CAAC;OAC7C,EAAE,UAAS,GAAG,EAAE;AACf,eAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;AACjB,cAAM,CAAC,OAAO,IAAI,GAAG,CAAC;OACvB,CAAC,CAAC;KACJ;GACF,CAAA;CACF,CACA,CAAC,CAEH,UAAU,CAAC,oBAAoB,EAAE,CAAC,QAAQ,EAAE,UAAU,EAAE,OAAO,EAC9D,UAAS,MAAM,EAAE,QAAQ,EAAE,KAAK,EAAE;AAChC,UAAQ,CAAC,KAAK,CAAC,UAAS,QAAQ,EAAE;AAChC,UAAM,CAAC,QAAQ,GAAG,QAAQ,CAAC;;AAEzB,UAAM,CAAC,WAAW,GAAG,CAAC,CAAC;AACvB,UAAM,CAAC,UAAU,GAAG,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC;AAC3C,UAAM,CAAC,YAAY,GAAG,EAAE,CAAC;AACzB,UAAM,CAAC,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,UAAU,GAAG,MAAM,CAAC,YAAY,CAAC,CAAC;GACvE,CAAC,CAAC;;AAEL,QAAM,CAAC,cAAc,GAAG,KAAK,CAAC,OAAO,UAAO,CAAC,UAAS,CAAC,EAAE;AACvD,QAAI,CAAC,CAAC,IAAI,IAAI,KAAK,EAAE,OAAO;AAC5B,KAAC,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,EAAE,UAAS,IAAI,EAAE;AAC9B,aAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAA;AACjB,YAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;KACvD,CAAC,CAAA;GACH,CAAC,CAAC;CACJ,CACA,CAAC,CAEH,UAAU,CAAC,wBAAwB,EAAE,CAAC,QAAQ,EAAE,QAAQ,EAAE,UAAU,EAAE,cAAc,EACnF,UAAS,MAAM,EAAE,MAAM,EAAE,QAAQ,EAAE,YAAY,EAAE;;AAE/C,UAAQ,CAAC,KAAK,CAAC,UAAS,QAAQ,EAAE;AAChC,UAAM,CAAC,QAAQ,GAAG,QAAQ,CAAC;AAC3B,UAAM,CAAC,OAAO,GAAG,QAAQ,CAAC,GAAG,CAAC,EAAE,EAAE,EAAE,YAAY,CAAC,EAAE,EAAE,CAAC,CAAC;GACxD,CAAC,CAAC;;AAEH,QAAM,CAAC,IAAI,GAAG,UAAS,IAAI,EAAE;AAC3B,QAAI,IAAI,CAAC,MAAM,EAAE;AACf,cAAQ,CAAC,MAAM,CAAC,EAAE,EAAE,EAAE,MAAM,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,MAAM,CAAC,OAAO,EAAE,UAAS,IAAI,EAAE;AACzE,eAAO,CAAC,GAAG,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;AAC7B,cAAM,CAAC,EAAE,CAAC,8BAA8B,CAAC,CAAC;OAC3C,EAAE,UAAS,GAAG,EAAE;AACf,eAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;OAClB,CAAC,CAAC;KACJ;GACF,CAAA;CACF,CACA,CAAC,CAEH,UAAU,CAAC,uBAAuB,EAAE,CAAC,QAAQ,EAAE,QAAQ,EAAE,UAAU,EAAE,cAAc,EAClF,UAAS,MAAM,EAAE,MAAM,EAAE,QAAQ,EAAE,YAAY,EAAE;;AAE/C,UAAQ,CAAC,KAAK,CAAC,UAAS,QAAQ,EAAE;AAChC,UAAM,CAAC,QAAQ,GAAG,QAAQ,CAAC;GAC5B,CAAC,CAAC;;AAEH,QAAM,CAAC,IAAI,GAAG,UAAS,IAAI,EAAE;AAC3B,QAAI,IAAI,CAAC,MAAM,EAAE;AACf,aAAO,CAAC,GAAG,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAA;AAC5B,cAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,UAAS,IAAI,EAAE;AAC5C,eAAO,CAAC,GAAG,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;AAC7B,cAAM,CAAC,EAAE,CAAC,8BAA8B,CAAC,CAAC;OAC3C,EAAE,UAAS,GAAG,EAAE;AACf,eAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;AACjB,cAAM,CAAC,OAAO,IAAI,GAAG,CAAC;OACvB,CAAC,CAAC;KACJ;GACF,CAAA;CACF,CACA,CAAC,CAAC","file":"manage-categories.controller.js","sourcesContent":["'use strict';\n\nangular.module('bhcmartApp')\n.controller('ManageCategoriesCtrl', ['$scope', 'Catalog', 'Modal',\n  function($scope, Catalog, Modal) {\n\n\n\n\n\n\n    Catalog.query(function(categories) {\n      $scope.categories = categories;\n        // pagination controls\n        $scope.currentPage = 1;\n        $scope.totalItems = $scope.categories.length;\n        $scope.itemsPerPage = 10; // items per page\n        $scope.noOfPages = Math.ceil($scope.totalItems / $scope.itemsPerPage);\n      });\n\n    $scope.deleteCatalog = Modal.confirm.delete(function(c) {\n      if (c.slug == 'all') return;\n      c.$remove(c._id, function(resp) {\n        console.log(resp)\n        $scope.categories.splice($scope.categories.indexOf(c), 1);\n      })\n    });\n  }\n  ])\n\n.controller('ManageCategoriesEditCtrl', ['$scope', '$state', 'Catalog', '$stateParams','Upload',\n  function($scope, $state, Catalog, $stateParams, Upload) {\n\n    Catalog.query(function(categories) {\n      $scope.categories = categories;\n      $scope.category = Catalog.get({ id: $stateParams.id });\n    });\n\n    $scope.upload = function(file) {\n      if (file) {\n        Upload.upload({\n          url: '/api/uploads',\n          data: { file: file }\n        }).then(function(resp) {\n          if ($scope.category) {\n\n            $scope.category.imageUrl = resp.data.url;\n\n          } else {\n            $scope.category = { imageUrl: resp.data.imageUrl }\n          }\n          console.log(resp.data);\n        }, function(resp) {\n          $scope.errorMsg = resp.status + ': ' + resp.data;\n        }, function(evt) {\n          var progressPercentage = parseInt(100.0 * evt.loaded / evt.total);\n            // console.log('progress: ' + progressPercentage + '% ' + evt.config.data.file.name);\n          });\n      };\n    }\n\n    $scope.save = function(form) {\n      if (form.$valid) {\n        Catalog.update({ id: $scope.category._id }, $scope.category, function(resp) {\n          console.log('updated', resp);\n          $state.go('adminconsole.manage-categories');\n        }, function(err) {\n          console.log(err);\n        });\n      }\n    }\n  }\n  ])\n\n.controller('ManageCategoriesAddCtrl', ['$scope', '$state', 'Catalog', '$stateParams','Upload',\n  function($scope, $state, Catalog, $stateParams, Upload) {\n\n    Catalog.query(function(categories) {\n      $scope.categories = categories;\n    });\n    $scope.options1 = []\n    \n    for (var i = 0; i < 10; i++) {\n      $scope.options1.push({ key: i + 1, value: 'Prop' + (i + 1).toString() });\n    }\n\n    $scope.option1 = [3,5,7];\n    $scope.upload = function(file) {\n      if (file) {\n        Upload.upload({\n          url: '/api/uploads',\n          data: { file: file }\n        }).then(function(resp) {\n          if ($scope.category) {\n\n            $scope.category.imageUrl = resp.data.url;\n\n          } else {\n            $scope.category = { imageUrl: resp.data.imageUrl }\n          }\n          console.log(resp.data);\n        }, function(resp) {\n          $scope.errorMsg = resp.status + ': ' + resp.data;\n        }, function(evt) {\n          var progressPercentage = parseInt(100.0 * evt.loaded / evt.total);\n            // console.log('progress: ' + progressPercentage + '% ' + evt.config.data.file.name);\n          });\n      };\n    }\n\n    $scope.save = function(form) {\n      if (form.$valid) {\n        console.log($scope.category)\n        Catalog.save($scope.category, function(resp) {\n          console.log('created', resp);\n          $state.go('adminconsole.manage-categories');\n        }, function(err) {\n          console.log(err);\n          $scope.message == err;\n        });\n      }\n    }\n  }\n  ])\n\n.controller('ManageFeaturesCtrl', ['$scope', 'Features', 'Modal',\n  function($scope, Features, Modal) {\n    Features.query(function(features) {\n      $scope.features = features;\n        // pagination controls\n        $scope.currentPage = 1;\n        $scope.totalItems = $scope.features.length;\n        $scope.itemsPerPage = 10; // items per page\n        $scope.noOfPages = Math.ceil($scope.totalItems / $scope.itemsPerPage);\n      });\n\n    $scope.deleteFeatures = Modal.confirm.delete(function(c) {\n      if (c.slug == 'all') return;\n      c.$remove(c._id, function(resp) {\n        console.log(resp)\n        $scope.features.splice($scope.features.indexOf(c), 1);\n      })\n    });\n  }\n  ])\n\n.controller('ManageFeaturesEditCtrl', ['$scope', '$state', 'Features', '$stateParams',\n  function($scope, $state, Features, $stateParams) {\n\n    Features.query(function(features) {\n      $scope.features = features;\n      $scope.feature = Features.get({ id: $stateParams.id });\n    });\n\n    $scope.save = function(form) {\n      if (form.$valid) {\n        Features.update({ id: $scope.feature._id }, $scope.feature, function(resp) {\n          console.log('updated', resp);\n          $state.go('adminconsole.manage-features');\n        }, function(err) {\n          console.log(err);\n        });\n      }\n    }\n  }\n  ])\n\n.controller('ManageFeaturesAddCtrl', ['$scope', '$state', 'Features', '$stateParams',\n  function($scope, $state, Features, $stateParams) {\n\n    Features.query(function(features) {\n      $scope.features = features;\n    });   \n\n    $scope.save = function(form) {\n      if (form.$valid) {\n        console.log($scope.features)\n        Features.save($scope.features, function(resp) {\n          console.log('created', resp);\n          $state.go('adminconsole.manage-features');\n        }, function(err) {\n          console.log(err);\n          $scope.message == err;\n        });\n      }\n    }\n  }\n  ]);\n"]}