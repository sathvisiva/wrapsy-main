{"version":3,"sources":["../../../client/app/orders/orders.controller.js"],"names":[],"mappings":"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","file":"orders.controller.js","sourcesContent":["'use strict';\n\nangular.module('bhcmartApp')\n.controller('OrdersCtrl', ['$scope', 'Order', 'Auth', 'Modal', function($scope, Order, Auth, Modal) {\n  var user = Auth.getCurrentUser();\n  $scope.isAdmin = Auth.hasRole('admin');\n\n  $scope.orderstatus = [\n  {id : 1, status : \"Processed\"},\n  {id : 2, status : \"Complete\"},\n  {id : 3, status : \"Open\"},\n  {id : 3, status : \"Canceled\"}\n  ];\n\n  $scope.searchOptions = [\n  {id : 1, option : \"Order #\"},\n  {id : 2, option : \"Customer Name\"},\n  {id : 3, option : \"Status\"},\n  {id : 3, option : \"Date\"}\n  ];\n\n  if ($scope.isAdmin)\n    Order.query(function(orders) {\n      $scope.orders = orders;\n        // pagination controls\n        $scope.currentPage = 1;\n        $scope.totalItems = $scope.orders.length;\n        $scope.itemsPerPage = 10; // items per page\n        $scope.noOfPages = Math.ceil($scope.totalItems / $scope.itemsPerPage);\n      });\n  else{\n    Order.myOrders({ id: user._id }, function(orders) {\n      $scope.orders = orders;\n        // pagination controls\n        $scope.currentPage = 1;\n        $scope.totalItems = $scope.orders.length;\n        $scope.itemsPerPage = 10; // items per page\n        $scope.noOfPages = Math.ceil($scope.totalItems / $scope.itemsPerPage);\n      });\n  }\n\n  $scope.deleteOrder = Modal.confirm.delete(function(o) {\n    o.$remove(o._id, function(resp) {\n      console.log(resp)\n      $scope.orders.splice($scope.orders.indexOf(o), 1);\n    })\n  });\n\n  $scope.deliverOrder = Modal.confirm.deliver(function(o) {\n    o.delivered = o.delivered ? false : true;\n    o.$update(function(resp) {\n      console.log(resp)\n    })\n  });\n\n  $scope.cancelOrder = Modal.confirm.cancel(function(o) {\n    o.delivered = o.delivered ? false : true;\n    o.$updateCancel(function(resp) {\n      console.log(resp)\n    })\n  });\n}]);\n"]}