{"version":3,"sources":["../../../client/app/orders/orders.controller.js"],"names":[],"mappings":"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","file":"orders.controller.js","sourcesContent":["'use strict';\n\nangular.module('bhcmartApp')\n.controller('OrdersCtrl', ['$scope', 'Order', 'Auth', 'Modal','Request','$mdDialog', function($scope, Order, Auth, Modal,Request,$mdDialog) {\n  var user = Auth.getCurrentUser();\n  $scope.isAdmin = Auth.hasRole('admin');\n\n  $scope.displayorders = function(){\n    Order.myOrders({ id: user._id }, function(orders) {\n      console.log(orders);\n      $scope.orders = orders;\n        // pagination controls\n        $scope.currentPage = 1;\n        $scope.totalItems = $scope.orders.length;\n        $scope.itemsPerPage = 10; // items per page\n        $scope.noOfPages = Math.ceil($scope.totalItems / $scope.itemsPerPage);\n      });\n\n  }\n\n  $scope.displayorders();\n\n  $scope.deleteOrder = Modal.confirm.delete(function(o) {\n    o.$remove(o._id, function(resp) {\n      console.log(resp)\n      $scope.orders.splice($scope.orders.indexOf(o), 1);\n    })\n  });\n\n  $scope.cancelorder = function(ev, orderid, ordernum) {\n    $scope.request = {}\n    $scope.request.customerId = user._id;\n    $scope.request.orderId = orderid;\n    // Appending dialog to document.body to cover sidenav in docs app\n    var confirm = $mdDialog.prompt()\n    .title('Do you want to cancel the Order ' + ordernum)\n    .textContent('please state a reason')\n    .placeholder('reason')\n    .ariaLabel('reason')\n    .initialValue('reason')\n    .targetEvent(ev)\n    .ok('cancel order')\n    .cancel('dismiss');\n\n    $mdDialog.show(confirm).then(function(result) {\n      $scope.request.cancel = true;\n      $scope.request.reason = result;\n      \n      Request.save($scope.request, function(res){\n        $scope.displayorders();\n\n      })\n    }, function() {\n      $scope.status = 'You didn\\'t name your dog.';\n    });\n  };\n\n  $scope.returnProduct = function(ev, order , productid, productname) {\n    $scope.request = {}\n    $scope.request.customerId = user._id;\n    $scope.request.orderId = order;\n    $scope.request.products = productid;\n    // Appending dialog to document.body to cover sidenav in docs app\n    var confirm = $mdDialog.prompt()\n    .title('Do you want to return the Product ' + productname)\n    .textContent('please state a reason')\n    .placeholder('reason')\n    .ariaLabel('reason')\n    .initialValue('reason')\n    .targetEvent(ev)\n    .ok('Return Product')\n    .cancel('dismiss');\n\n    $mdDialog.show(confirm).then(function(result) {\n      $scope.request.return = true;\n      $scope.request.reason = result;\n      \n      Request.save($scope.request, function(res){\n        console.log(res)\n        $scope.displayorders();\n\n      })\n    }, function() {\n      $scope.status = 'You didn\\'t name your dog.';\n    });\n  };\n\n  $scope.deliverOrder = Modal.confirm.deliver(function(o) {\n    o.delivered = o.delivered ? false : true;\n    o.$update(function(resp) {\n      console.log(resp)\n    })\n  });\n}]);\n"]}