{"version":3,"sources":["../../../client/app/manage-products/manage-products.controller.js"],"names":[],"mappings":"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","file":"manage-products.controller.js","sourcesContent":["'use strict';\n\nangular.module('bhcmartApp')\n.controller('ManageProductsCtrl', ['$scope', 'Product', 'Modal', '$mdDialog' , 'AlertService',\n  function($scope, Product, Modal, $mdDialog, AlertService) {\n\n    $scope.displayProducts = function(){\n      Product.query(function(products) {\n        $scope.products = products;\n        // pagination controls\n        $scope.currentPage = 1;\n        $scope.totalItems = $scope.products.length;\n        $scope.itemsPerPage = 10; // items per page\n        $scope.noOfPages = Math.ceil($scope.totalItems / $scope.itemsPerPage);\n      });\n\n    }\n    $scope.displayProducts();\n\n    $scope.deleteproduct = function(ev, product) {\n      var confirm = $mdDialog.confirm()\n      .title('Would you like to delete ' + product.title +' ?')\n      .ariaLabel('Delete Product')\n      .targetEvent(ev)\n      .ok('Please do it!')\n      .cancel('Cancel');\n\n      $mdDialog.show(confirm).then(function() {\n        $scope.status = 'ok';\n        product.$remove(product._id, function(resp) {\n          $scope.query()\n        })\n      }, function() {\n        $scope.displayProducts();\n\n        console.log($scope.status)\n      });\n    };\n\n\n\n\n    $scope.featuredProducts = function(featured , id,p){\n      if(featured){\n        Product.addfeaturedPdt({id:id},p).$promise.then(function(products) {\n         $scope.displayProducts();\n       });\n      }else{\n        Product.removefeaturedPdt({id:id},p).$promise.then(function(products) {\n          $scope.displayProducts();\n        });\n      }\n    }\n  }\n  ])\n.controller('ManageProductsEditCtrl', ['$scope', '$stateParams', '$state', 'Upload', 'categories', 'product', 'Product','Vendor','Feature','Request','$filter',\n  function($scope, $stateParams, $state, Upload, categories, product, Product,Vendor,Feature,Request,$filter) {\n\n    $scope.categories = categories;\n    $scope.product = product;\n    $scope.vendors = Vendor.query();\n\n    console.log($scope.product)\n      // upload on file select or drop\n            // upload on file select or drop\n            $scope.upload = function(file, invalid) {\n              if (file) {\n                Upload.upload({\n                  url: '/api/uploads',\n                  data: { file: file }\n                }).then(function(resp) {\n\n                  if ($scope.product) {\n                    if($scope.product.images){\n                //$scope.product.images.push(resp.data.url);\n                var url = resp.data.url\n                var cover = false\n                $scope.product.images.push({\n                  'url' : resp.data.url,\n                  'cover' : false\n                });\n              }\n              else{\n                $scope.product.images = [];\n                var url = resp.data.url\n                var cover = false\n                $scope.product.images.push({\n                  'url' : resp.data.url,\n                  'cover' : false\n                });\n              }\n            } else {\n              $scope.product = {} ; $scope.product.images = [];\n              $scope.product.images.push(resp.data.url);\n            }\n\n            console.log($scope.product.images);\n          }, function(resp) {\n            $scope.errorMsg = resp.status + ': ' + resp.data;\n          }, function(evt) {\n            var progressPercentage = parseInt(100.0 * evt.loaded / evt.total);\n            // console.log('progress: ' + progressPercentage + '% ' + evt.config.data.file.name);\n          });\n              };\n            }\n\n            var datas = []\n            Feature.group(function(data) {     \n              $scope.filterfeatures = data\n              datas = data\n              console.log($scope.filterfeatures)\n\n            });\n\n            $scope.SelectedRow = function(key){\n              $scope.options = $filter('filter')($scope.filterfeatures, {key: key })[0].v;\n              console.log($scope.options)\n\n            }\n\n            $scope.deleteFeature = function(index){\n              $scope.product.features.splice(index,1)\n            }\n\n            $scope.addfeature = function(feature){\n              $scope.product.features.push(feature)\n              $scope.feature = {};\n              console.log($scope.product.features)\n            }\n\n            $scope.deleteImage = function(index , url){\n              $scope.product.images.splice(index , 1)\n              console.log(url);\n              $scope.images = {};\n              $scope.images.url = url\n              Request.deleteImage($scope.images, function(requests) {\n                $scope.requests = requests\n\n              });\n            }\n\n            $scope.save = function() {\n              if (true) {\n                if (!$scope.product.affiliate) {\n                  for(var i=0 ; i < $scope.product.images.length ; i++){\n                    var coverimagecount = 0;\n                    if($scope.product.images[i].cover){\n                      coverimagecount = coverimagecount +1;\n                      $scope.product.coverimage = $scope.product.images[i].url;\n                    }\n                    if(coverimagecount == 0){\n                      $scope.product.coverimage = $scope.product.images[0].url;\n                    }\n                  }\n                }\n\n                Product.update($scope.product._id, $scope.product, function(resp) {\n                  console.log(resp);\n                  $state.go('admin.products');\n                }, function(err) {\n                  console.log(err)\n                })\n              }\n            }\n          }\n          ])\n.controller('ManageProductsAddCtrl', ['$scope', '$state', 'Product', 'categories', 'Upload','Feature','$filter','$window','Vendor','Request',\n  function($scope, $state, Product, categories, Upload, Feature,$filter, $window, Vendor, Request) {\n    $scope.categories = categories;\n\n      // upload on file select or drop\n      $scope.upload = function(file, invalid) {\n        if (file) {\n          Upload.upload({\n            url: '/api/uploads',\n            data: { file: file }\n          }).then(function(resp) {\n\n            if ($scope.product) {\n              if($scope.product.images){\n                //$scope.product.images.push(resp.data.url);\n                var url = resp.data.url\n                var cover = false\n                $scope.product.images.push({\n                  'url' : resp.data.url,\n                  'cover' : false\n                });\n              }\n              else{\n                $scope.product.images = [];\n                var url = resp.data.url\n                var cover = false\n                $scope.product.images.push({\n                  'url' : resp.data.url,\n                  'cover' : false\n                });\n              }\n            } else {\n              $scope.product = {} ; $scope.product.images = [];\n              $scope.product.images.push(resp.data.url);\n            }\n\n            console.log($scope.product.images);\n          }, function(resp) {\n            $scope.errorMsg = resp.status + ': ' + resp.data;\n          }, function(evt) {\n            var progressPercentage = parseInt(100.0 * evt.loaded / evt.total);\n            // console.log('progress: ' + progressPercentage + '% ' + evt.config.data.file.name);\n          });\n        };\n      }\n\n      /*var loading_screen = $window.pleaseWait({\n        logo: \"assets/img/logo/giftcard.jpg\",\n        backgroundColor: 'transparent',\n        loadingHtml: '<div class=\"sk-spinner sk-spinner-wandering-cubes\"><div class=\"sk-cube1\"></div><div class=\"sk-cube2\"></div></div>'\n      });*/\n\n      /*$scope.asin = \"B00KGZZ824\"\n      $scope.product = {}\n      $scope.product.asin = \"B00KGZZ824\"\n      Product.amazonaffiliate($scope.product,function(data){\n\n      })*/\n      $scope.product = {}\n      $scope.product.features = []\n      var datas = []\n      Feature.group(function(data) {     \n        $scope.filterfeatures = data\n        datas = data\n        console.log($scope.filterfeatures)\n\n      });\n\n      $scope.SelectedRow = function(key){\n        $scope.options = $filter('filter')($scope.filterfeatures, {key: key })[0].v;\n        console.log($scope.options)\n\n      }\n\n      $scope.deleteFeature = function(index){\n        $scope.product.features.splice(index,1)\n      }\n\n      $scope.addfeature = function(feature){\n        $scope.product.features.push(feature)\n        $scope.feature = {};\n        console.log($scope.product.features)\n      }\n\n      Vendor.query(function(data){\n        $scope.vendors = data;\n      })\n\n\n      $scope.deleteImage = function(index , url){\n        $scope.product.images.splice(index , 1)\n        console.log(url);\n        $scope.images = {};\n        $scope.images.url = url\n        Request.deleteImage($scope.images, function(requests) {\n          $scope.requests = requests\n\n        });\n      }\n\n      $scope.save = function() {\n        if (!$scope.product.affiliate) {\n          for(var i=0 ; i < $scope.product.images.length ; i++){\n            var coverimagecount = 0;\n            if($scope.product.images[i].cover){\n              coverimagecount = coverimagecount +1;\n              $scope.product.coverimage = $scope.product.images[i].url;\n            }\n            if(coverimagecount == 0){\n              $scope.product.coverimage = $scope.product.images[0].url;\n            }\n          }\n        }\n          //\n          Product.save($scope.product, function(resp) {\n            console.log(resp);\n            $state.go('admin.products');\n          }, function(err) {\n            console.log(err)\n          })\n\n        }\n      }\n      ]);\n"]}