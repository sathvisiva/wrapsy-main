{"version":3,"sources":["../../../client/app/manage-products/manage-products.controller.js"],"names":[],"mappings":"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","file":"manage-products.controller.js","sourcesContent":["'use strict';\n\nangular.module('bhcmartApp')\n.controller('ManageProductsCtrl', ['$scope', 'Product', 'Modal',\n  function($scope, Product, Modal) {\n    Product.query(function(products) {\n      console.log(products);\n      $scope.products = products;\n        // pagination controls\n        $scope.currentPage = 1;\n        $scope.totalItems = $scope.products.length;\n        $scope.itemsPerPage = 10; // items per page\n        $scope.noOfPages = Math.ceil($scope.totalItems / $scope.itemsPerPage);\n      });\n\n    \n\n    $scope.deleteProduct = Modal.confirm.delete(function(p) {\n      if (p.slug == 'all') return;\n      p.$remove(p._id, function(resp) {\n        console.log(resp)\n        $scope.products.splice($scope.products.indexOf(p), 1);\n      })\n    });\n  }\n  ])\n.controller('ManageProductsEditCtrl', ['$scope', '$stateParams', '$state', 'Upload', 'Catalog', 'Product',\n  function($scope, $stateParams, $state, Upload, Catalog, Product) {\n\n   $scope.categories = Catalog.query();\n   console.log($scope.categories)\n   $scope.product= Product.get({ id: $stateParams.id }, function(data){\n    console.log(data);\n    $scope.product.categories = $scope.product.categories._id;\n  })\n   $scope.features = Product.indexFeatures();\n\n   $scope.addFeatures = function(productfeatures){\n    $scope.product.features.push(productfeatures);\n  }\n\n  $scope.del = function(i){\n    $scope.product.features.splice(i,1);\n  }\n\n  $scope.upload = function(file) {\n    if ($scope.form.imageUrl.$valid && file) {\n      Upload.upload({\n        url: '/api/uploads',\n        data: { file: file }\n      }).then(function(resp) {\n        if ($scope.product) {\n          $scope.product.imageUrl = resp.data.url;\n        } else {\n          $scope.product = { imageUrl: resp.data.imageUrl }\n        }\n        console.log(resp.data);\n      }, function(resp) {\n        $scope.errorMsg = resp.status + ': ' + resp.data;\n      }, function(evt) {\n        var progressPercentage = parseInt(100.0 * evt.loaded / evt.total);\n            // console.log('progress: ' + progressPercentage + '% ' + evt.config.data.file.name);\n          });\n    };\n  }\n\n  $scope.save = function(form) {\n    if (form.$valid) {\n      Product.update($scope.product._id, $scope.product, function(resp) {\n        console.log(resp);\n        $state.go('adminconsole.pdtlist');\n      }, function(err) {\n        console.log(err)\n      })\n    }\n  }\n}\n])\n.controller('ManageProductsAddCtrl', ['$scope', '$state', 'Product', 'categories','$uibModal', 'Upload',\n  function($scope, $state, Product, categories,$uibModal, Upload) {\n    $scope.categories = categories;\n\n    $scope.productType = \"Normal\";\n\n    $scope.product = {}\n\n    $scope.product.features = [];\n\n    $scope.features = Product.indexFeatures();\n      // upload on file select or drop\n      $scope.upload = function(file) {\n        if ($scope.form.imageUrl.$valid && file) {\n          Upload.upload({\n            url: '/api/uploads',\n            data: { file: file }\n          }).then(function(resp) {\n            if ($scope.product) {\n              $scope.product.imageUrl = resp.data.url;\n            } else {\n              $scope.product = { imageUrl: resp.data.imageUrl }\n            }\n            console.log(resp.data);\n          }, function(resp) {\n            $scope.errorMsg = resp.status + ': ' + resp.data;\n          }, function(evt) {\n            var progressPercentage = parseInt(100.0 * evt.loaded / evt.total);\n            // console.log('progress: ' + progressPercentage + '% ' + evt.config.data.file.name);\n          });\n        };\n      }\n\n      $scope.addFeatures = function(productfeatures){\n        $scope.product.features.push(productfeatures);\n      }\n\n      $scope.del = function(i){\n        $scope.product.features.splice(i,1);\n      }\n\n\n      $scope.save = function(form) {\n        if($scope.product.color){\n          $scope.product.color = $scope.product.color.split(',');\n        }if($scope.product.size){\n          $scope.product.size = $scope.product.size.split(',');\n        }\n        if (form.$valid) {\n          Product.save($scope.product, function(resp) {\n            console.log(resp);\n            $state.go('adminconsole.pdtlist');\n          }, function(err) {\n            console.log(err)\n          })\n        }\n      }\n    }\n    ]);\n"]}