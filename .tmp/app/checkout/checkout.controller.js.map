{"version":3,"sources":["../../../client/app/checkout/checkout.controller.js"],"names":[],"mappings":"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","file":"checkout.controller.js","sourcesContent":["'use strict';\n\nangular.module('bhcmartApp')\n.controller('CheckoutCtrl', ['$scope', 'Auth', '$state', 'Order','toaster','Voucher','Address','Payment','$uibModal', 'stateService','Cart',function($scope, Auth, $state, Order,  toaster,Voucher,Address,Payment, $uibModal, stateService, Cart) {\n  $state.go('checkout.shipping')\n  $scope.user = Auth.getCurrentUser() || {};\n  $scope.user.country = \"In\"\n\n  $scope.isLoggedIn = Auth.isLoggedIn();\n  $scope.errors = {};\n  $scope.submitted = false;\n\n  $scope.disableorder = true ; \n  $scope.disablepayment = true;\n  $scope.address = {};\n  $scope.amounttobepaid = 0\n  $scope.grandtotal = 0\n  $scope.voucheramount = 0\n  \n  $scope.enableVoucher = true;\n\n\n  var q = {where:{email:Auth.getCurrentUser().email}};\n\n  $scope.myTabIndex = 0;\n\n  function uuidv4() {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n      var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n      return v.toString(16);\n    });\n  }\n\n  $scope.displaycarItems = function(){\n    Cart.show({id : Auth.getCurrentUser()._id}, function(res){\n      $scope.carts = res;\n      $scope.appliedVoucher = res.vouchers;\n      console.log($scope.appliedVoucher)\n      if($scope.appliedVoucher || $scope.appliedVoucher !=null){\n        $scope.enableVoucher = false;\n      }\n      $scope.items = res.items;\n      $scope.subtotal = 0;\n      for(var i= 0 ;i < $scope.items.length; i++ ){\n        $scope.subtotal += $scope.items[i].subtotal;\n        if($scope.appliedVoucher || $scope.appliedVoucher !=null){\n          $scope.grandtotal = $scope.subtotal ; \n          $scope.voucheramount = $scope.appliedVoucher.amount;\n          $scope.amounttobepaid = $scope.subtotal - $scope.appliedVoucher.amount; \n        }else{\n          $scope.grandtotal = $scope.subtotal  ;\n          $scope.amounttobepaid = $scope.subtotal\n        }\n      }\n    }\n    );\n  }\n\n  $scope.displaycarItems()\n  console.log(\"tabindex\");\n\n  console.log($scope.myTabIndex);\n /* $scope.vouchers =  Voucher.query(q);\n  console.log($scope.vouchers)\n\n\n\n  */\n\n\n\n\n  $scope.redeemvoucher = function (voucherCode) {\n    $scope.errormessage = '';\n    $scope.voucher = {};\n    $scope.voucher.code = voucherCode;\n    $scope.voucher.amount = $scope.subtotal;\n    $scope.voucher.user = Auth.getCurrentUser()._id;\n    console.log($scope.voucher)\n    Voucher.redeem($scope.voucher, function(resp){\n      console.log(resp)\n      $scope.displaycarItems()\n      if(resp.errorcode == 0 ){\n        $scope.errormessage = \"Sorry, Voucher already redeemed\";\n      }else if(resp.errorcode == 1){\n        $scope.errormessage = \"Sorry, Voucher validity expired\";\n      }else if(resp.errorcode == 2){\n        $scope.errormessage = \"Sorry, Voucher amount is greater than cart amount\";\n      }else if(resp.errorcode == 3){\n        $scope.errormessage = \"Sorry, Invalid voucher code\";\n      }else if(resp.errorcode == 4){\n        $scope.errormessage = \"Sorry, Voucher already applied to cart\";\n      }\n      \n\n\n\n    });\n    \n  };\n\n\n\n  $scope.items = Cart.show({id : Auth.getCurrentUser()._id}, function(res){\n    console.log(res)\n    $scope.items = res.items;\n    console.log($scope.items);\n  });\n\n  $scope.moveprev = function(){\n   $scope.myTabIndex = 0; \n   \n }\n\n\n\n\n $scope.moveNext = function(){\n   $scope.myTabIndex = $scope.myTabIndex + 1; \n   $scope.showshipping = true;\n }\n\n $scope.gotoshipping = function(){\n  console.log(\"inside shipping\")\n  $scope.myTabIndex = 0;\n}\n\n$scope.showshipping = false;\n\n\n$scope.states = stateService.getstates();\n\n\n/*\n  $scope.savelocationmyTabIndex = function(form){\n    $scope.locationformsubmmyTabIndexitted = false;\n    if (!form.$valid) {\n      $scope.locationformsubmitted = true\n    }else{\n      $scope.disablemessage = false;\n      $state.go('createregistry.message');\n    }\n\n  }*/\n/*\n  $scope.redeemVoucher = function(voucher1){\n    var data = {code:voucher1};\n    Voucher.redeem(data, function(resp) {\n\n    }, function(err) {\n      console.log(err)\n    })\n\n  }*/\n\n\n  $scope.validate = form => {\n    if(!$scope.isLoggedIn){\n      toaster.pop('error', \"Please login to continue\");\n    }      \n    console.log(\"state\" + $scope.user.state)\n    if (form.$valid && ( $scope.user.state || $scope.user.state != \"\")) {\n      $scope.message = '';\n      $scope.submitted = true;\n    }else{\n      toaster.pop('error', \"Please check the data entered\");\n    }\n  }\n\n\n  function makeid() {\n    var text = \"\";\n    var possible = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n\n    for (var i = 0; i < 5; i++)\n      text += possible.charAt(Math.floor(Math.random() * possible.length));\n\n    return text;\n  }\n\n/*\n  $scope.checkout = (cart, user) => {\n\n\n    if (user.name && user.email && user.phone && user.address && user.city && user.country) {\n      _.map(cart.items, i => {\n        i.productId = i.id;\n        delete i.data;\n        delete i.id;\n        return i;\n      })\n\n      cart = _.extend(cart, {\n        customerId: user._id ? user._id : '',\n        customerName: user.name,\n        customerEmail: $scope.user.email,\n        customerAddress: user.address,\n        customerAddress1: user.address1,\n        customerlandmark : user.landmark,\n        customerPhone: user.phone,\n        customerCity: user.city,\n        customerState: user.state ? user.state : '',\n        customerCountry: 'India'\n      });\n\n      Order.save(cart,\n        function(resp) {\n          ngCart.empty();\n          $state.go('invoice', {id: resp._id});\n        },\n        function(err) {\n          toaster.pop('error', \"Please Try again later\");\n        });\n    } else {\n      $scope.message = 'Please, complete the shipping section and click on continue'\n    }\n  }*/\n\n\n  $scope.completeOrder = function(cart , user){\n   $scope.cart = {};\n   $scope.cart.items = cart;\n   if($scope.carts.vouchers){\n    $scope.cart.vouchers = $scope.carts.vouchers._id\n    $scope.cart.paidbyVoucher = $scope.carts.vouchers.amount;\n  }\n  $scope.cart.paid = paid;\n  $scope.cart.status = 'placed';\n\n  Address.save($scope.address, function(resp) {\n    console.log(resp)\n    $scope.cart.customerId = user._id ? user._id : '',\n    $scope.cart.customerName = user.name,\n    $scope.cart.customerEmail= $scope.user.email,\n    $scope.cart.customerAddress = resp._id\n    console.log(cart)\n    $scope.cart.totalCost = 0;\n    for(var i=0 ; i < $scope.cart.items.length ; i++){\n      $scope.cart.totalCost += parseInt($scope.cart.items[i].subtotal)\n      $scope.cart.items[i].statusChangeHistory = [];\n      $scope.cart.items[i].status = 'placed'\n      $scope.cart.items[i].statusChangeHistory.push({status : 'placed'})\n    }\n    $scope.cart.status = 'placed';\n    console.log($scope.cart)\n\n    Order.save($scope.cart,function(resp) {\n      Cart.delete({id : Auth.getCurrentUser()._id})\n      $state.go('orders')\n    },\n    function(err) {\n      toaster.pop('error', \"Please Try again later\");\n    });\n  }, function(err) {\n    console.log(err)\n  });\n\n\n}\n\n$scope.presubmit = function () {\n  var data = { preHashString: $scope.mkey + '|' + $scope.txnid + '|' + $scope.amount + '|' + $scope.productInfo + '|' + $scope.firstName + '|' + $scope.email + '|' + $scope.id + '||||||||||' };\n  Payment.createHash(data, function(resp) {\n    document.getElementById('hash').value = resp.hash;\n    document.getElementById('paymentForm').submit();\n  }, function(err) {\n    console.log(err)\n  })\n}\n\n$scope.message = 'Get ready to buy gift card';\n$scope.mkey = 'gtKFFx';\n$scope.productInfo = 'AddVoucher';\n$scope.txnid = makeid();\n$scope.id = uuidv4();\n$scope.type = '2';\n$scope.email = Auth.getCurrentUser().email;\n$scope.phone = 9176464641;\n$scope.lastName = Auth.getCurrentUser().name;\n$scope.firstName = '';\n$scope.surl = window.location.origin + \"/api/payment/pdtPaymentStatus\";\n$scope.furl = window.location.origin + \"/api/payment/pdtPaymentFailureStatus\";\n$scope.hash = '';\n\n\n$scope.paymentpage = function(){\n  $scope.myTabIndex = $scope.myTabIndex + 1; \n}\n\n$scope.checkoutorder = function(cart, user){\n\n\n  $scope.cart = {};\n  $scope.cart.items = cart;\n  if($scope.carts.vouchers){\n    $scope.cart.vouchers = $scope.carts.vouchers._id\n    $scope.cart.paidbyVoucher = $scope.carts.vouchers.amount;\n  }\n  Address.save($scope.address, function(resp) {\n    console.log(resp)\n    $scope.cart.customerId = user._id ? user._id : '',\n    $scope.cart.customerName = user.name,\n    $scope.cart.customerEmail= $scope.user.email,\n    $scope.cart.address = resp._id\n    console.log(cart)\n    $scope.cart.totalCost = 0;\n    for(var i=0 ; i < $scope.cart.items.length ; i++){\n      $scope.cart.totalCost += parseInt($scope.cart.items[i].subtotal)\n      $scope.cart.items[i].statusChangeHistory = [];\n      $scope.cart.items[i].status = 'placed'\n      $scope.cart.items[i].statusChangeHistory.push({status : 'placed'})\n    }\n    $scope.cart.status = 'placed';\n    console.log($scope.cart.totalCost)\n\n    Order.save($scope.cart,function(resp) {\n      $scope.amount = resp.totalCost;\n      $scope.productInfo = resp._id;\n      $scope.presubmit();\n      $scope.myTabIndex = $scope.myTabIndex + 1; \n    },\n    function(err) {\n      toaster.pop('error', \"Please Try again later\");\n    });\n  }, function(err) {\n    console.log(err)\n  });\n\n} \n\n}]);\n"]}