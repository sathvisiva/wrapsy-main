{"version":3,"sources":["../../../../client/app/account/login/login.controller.js"],"names":[],"mappings":"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","file":"login.controller.js","sourcesContent":["'use strict';\n\n(function() {\n\n  class LoginController {\n\n\n    constructor($http, $scope, $timeout, Auth, $state,User, $mdDialog, $window, dataToPass, Cart, $uibModal) {\n      $scope.dataToPass = dataToPass\n      if(dataToPass){ \n        if(dataToPass.event == 'login'){\n         $scope.loginlayout = true;\n         $scope.signup = false;\n       }else{\n        $scope.loginlayout = false;\n        $scope.signup = true;\n      }\n    }else{\n      $scope.loginlayout = true;\n    }\n    $scope.user = {};\n    $scope.errors = {};\n    $scope.submitted = false;\n    \n    $scope.forgotlayout = false;\n    $scope.unregistered = false; $scope.incorrectpassword = false; \n\n\n    $scope.cancel = function() {\n      $mdDialog.cancel();\n    }\n\n    $scope.switchsigninlayout = function(){\n      $scope.loginlayout = false;\n      $scope.signup = true;\n    }\n\n    $scope.switchloginlayout = function(){\n      $scope.loginlayout = true;\n      $scope.signup = false;\n    }\n\n    $scope.register = function(form) {\n      $scope.submitted = true;\n      console.log(form.$valid)\n      if (form.$valid) {\n\n        Auth.createUser({\n          name: $scope.user.name,\n          email: $scope.user.email,\n          password: $scope.user.password\n        })\n        .then(() => {\n          if($scope.dataToPass){\n            if($scope.dataToPass.state == 'cart'){\n              Cart.addTocart({id : Auth.getCurrentUser()._id},$scope.dataToPass.items,function(res){\n                console.log(res)\n                var modalInstance = $uibModal.open({\n                  templateUrl : 'app/cart/cart.html',\n                  controller: 'CartCtrl',\n                  size :'lg'\n                })\n              }, function(err) {\n                var title = \"Sorry product cannot be added to Cart\" \n                AlertService.showAlert(err.data)\n              }); \n\n            }else{\n              $state.go($scope.dataToPass.state);\n            }\n          }\n          $scope.cancel();\n\n        })\n        .catch(err => {\n          err = err.data;\n          console.log(err)\n          $scope.errors.other = err.message;\n\n        });\n      }\n    }\n    $scope.login = function(form) {\n      $scope.submitted = true;\n\n      if (form.$valid) {\n        Auth.login({\n          email: $scope.user.email,\n          password: $scope.user.password\n        })\n        .then(() => {\n          if($scope.dataToPass){\n            if($scope.dataToPass.state == 'cart'){\n              if($scope.dataToPass.items){\n                Cart.addTocart({id : Auth.getCurrentUser()._id},$scope.dataToPass.items,function(res){\n                  var modalInstance = $uibModal.open({\n                    templateUrl : 'app/cart/cart.html',\n                    controller: 'CartCtrl',\n                    size :'lg'\n                  })\n                }, function(err) {\n                  var title = \"Sorry product cannot be added to Cart\" \n                  AlertService.showAlert(err.data)\n                }); \n              }else{\n                var modalInstance = $uibModal.open({\n                  templateUrl : 'app/cart/cart.html',\n                  controller: 'CartCtrl',\n                  size :'lg'\n                })\n              }\n\n\n            }else{\n              $state.go($scope.dataToPass.state);\n            }\n          }\n          $scope.cancel();\n\n        })\n        .catch(err => {\n          if(err.message == '1'){\n            $scope.unregistered = true;\n          }else if(err.message == '2'){\n            $scope.incorrectpassword = true;\n          }else{\n            $scope.errors.other = err.message;\n          }\n        });\n      }\n    }\n\n\n\n    $scope.loginOauth = function(provider) {\n      $window.location.href = '/auth/' + provider;\n    };\n\n    $scope.switchforgotlayout = function(){\n      $mdDialog.cancel();\n      $state.go('forgotPassword');\n    }\n\n  }\n}\n\nangular.module('bhcmartApp')\n.controller('LoginController', LoginController);\n\n})();\n\n\n\n\n\n\n"]}