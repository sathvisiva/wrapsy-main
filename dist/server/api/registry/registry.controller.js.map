{"version":3,"sources":["../../../../server/api/registry/registry.controller.js"],"names":[],"mappings":"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","file":"registry.controller.js","sourcesContent":["'use strict';\n\nvar _ = require('lodash');\n\nvar Registry = require('./registry.model').registry;\nvar Rsvp = require('./registry.model').rsvp;\nvar GuestBook = require('./registry.model').guestBook;\nvar Contribution = require('./registry.model').contribution;\nvar Accomodation = require('./registry.model').accomodation;\nvar mail = require('../mail/sendmail');\n\n\n\nfunction isJson(str) {\n\ttry {\n\t\tstr = JSON.parse(str);\n\t} catch (e) {\n\t\tstr = str;\n\t}\n\treturn str\n}\n\nfunction handleError(res, statusCode) {\n  statusCode = statusCode || 500;\n  return function(err) {\n    console.error(err, statusCode);\n    res.status(statusCode).send(err);\n  };\n}\n\nfunction responseWithResult(res, statusCode) {\n\t\n  statusCode = statusCode || 200;\n  return function(entity) {\n    if (entity) {\n    \tconsole.log(\"inside entity\")\n    \t\n      res.end(JSON.stringify(entity));\n      \n    }\n  };\n}\n\n// Get all features group\nexports.count = function(req, res) {\n\t\n\tif(req.query){\n\t\tvar q = isJson(req.query.where);\n\t\tRegistry.find(q).count().exec(function (err, count) {\n\t\t\tif(err) { \n\t\t\t\tconsole.log(err)\n\t\t\t\treturn handleError(res, err); }\n\t\t\t\treturn res.status(200).json([{count:count}]);\n\t\t\t});\n\t}\n};\n\n// Get list of products\nexports.index = function(req, res) {\n\n  if(req.query){\n\n    if(req.query.slug){\n      console.log(\"inside index\");\n      console.log(req.query);\n      console.log(req.query.slug);\n      Registry.findOne(req.query, function (err, registry) {\n\n        if(err) { return handleError(res, err); }\n        if(!registry) { return res.status(404).send('Not Found'); }\n        return res.json(registry);\n      });\n    }\n\n    else if(req.query.count){\n\n     var q = isJson(req.query.count);\n\n     Registry.find(q).select('_id occasion').exec(function (err, registries) {\n      if(err) { \n       console.log(err)\n       return handleError(res, err); }\n\n       return res.status(200).json(registries);\n     });\n   }\n   else{\n\n     var q = isJson(req.query.where);\n     console.log(q);\n     Registry.find(q).exec(function (err, registry) {\n      if(err) { console.log(err);\n       return handleError(res, err); }\n       console.log(registry)\n       return res.status(200).json(registry);\n     });\n   }\n\n\n\n }else{\n  Registry.find(function (err, registry) {\n   if(err) { return handleError(res, err); }\n   return res.status(200).json(registry);\n });\n}\n};\n\n\n\n// Get a single product\nexports.show = function(req, res) {\n\n  Registry.findById(req.params.id, function (err, registry) {\n\n    if(err) { return handleError(res, err); }\n    if(!registry) { return res.status(404).send('Not Found'); }\n    return res.json(registry);\n  });\n\n\n};\n\n/*exports.makevisible = function(req, res) {\n\n  Registry.update({ _id: req.params.id }, { $set: { visible: true }}, function (err, registry) {\n    if (err) {\n      handleError(err)\n    }\n    Registry.findById(req.params.id, function (err, registry) {\n\n      if(err) { return handleError(res, err); }\n      if(!registry) { return res.status(404).send('Not Found'); }\n      return res.json(registry);\n    });\n\n  });\n};*/\n\n\nexports.makevisible = function(req, res) {\n\n  /*var visiblity = */\n  console.log(\"inside make visible\");\n\n  console.log(req.body);\n  console.log(req.query);\n\n  Registry.update({ _id: req.body.id }, { $set: { visible: req.body.visible }}, function (err, registry) {\n    if (err) {\n      handleError(err)\n    }\n   /* Registry.findById(req.params.id, function (err, registry) {\n\n      if(err) { return handleError(res, err); }\n      if(!registry) { return res.status(404).send('Not Found'); }\n      return res.json(registry);\n    });*/\n\n    return res.json(registry);\n\n  });\n};\n\n\n\n\n// Creates a new product in the DB.\n/*exports.create = function(req, res) {\n\tconsole.log(req.body)\n  Registry.createAsync(req.body)\n    .then(responseWithResult(res, 201))\n    .catch(handleError(res));\n  };*/\n\n  exports.create = function(req, res) {\n\n\n    Registry.create(req.body, function(err, registry) {\n      if(err) { return handleError(res, err); }\n      let users = [\n      {\n        'name': registry.youfirstName,\n        'email': registry.username,\n      }\n      ];\n      mail.sendmail('registry',users);\n\n\n      return res.status(201).json(registry);\n    });\n\n\n\n\n  };\n\n  exports.createregistryProduct = function(req, res) {\n\n\t/*RegistryProduct.create(req.body, function(err, registry) {\n\t\tif(err) { return handleError(res, err); }\n\t\t\n\t\treturn res.status(201).json(registry);\n\t});*/\n/*\n\tRegistryProduct.createAsync(req.body)\n    .then(linkRegistryProduct(res, req.params.id))\n    .then(responseWithResult(res, 201))\n    .catch(handleError(res));*/\n\n    Registry.findByIdAsync(req.params.id)\n    .then(handleEntityNotFound(res))\n    .then(function(entity) {\n      console.log(req.body)\n      entity.products.push(req.body);\n      return entity.save(function (err) {\n        if (err) { return handleError(res, err); }\n\n        return res.status(200).json(entity);\n      });\n    })\n  };\n\n\n  function linkRegistryProduct(res, registryId) {\n    return function(entity) {\n      var product = entity;\n      console.log(\"inside link registry\")\n      console.log(registryId)\n      return Registry.findByIdAsync(registryId)\n      .then(handleEntityNotFound(res))\n      .then(function(entity) {\n        entity.products.push(product._id);\n        return entity.saveAsync().spread(function() {\n          return product;\n        });\n      })\n    }\n  }\n\n//rsvpRegistry\n\nexports.creatersvpRegistry = function(req, res) {\n  console.log(req.query)\n  Rsvp.create(req.body, function(err, registry) {\n    if(err) { return handleError(res, err); }\n    \n    return res.status(201).json(registry);\n  });\n};\n\nexports.indexrsvpRegistry = function(req, res) {\n\n\n  Rsvp.find({registryId:req.params.id}).exec(function (err, rsvp) {\n    if(err) { console.log(err);\n      return handleError(res, err); }\n      return res.status(200).json(rsvp);\n    });\n};\n\nexports.createGuestBookRegistry = function(req, res) {\n\n  GuestBook.create(req.body, function(err, registry) {\n    if(err) { return handleError(res, err); }\n    \n    return res.status(201).json(registry);\n  });\n};\n\nexports.indexGuestBookRegistry = function(req, res) {\n\n  GuestBook.find({registryId:req.params.id}).exec(function (err, wishes) {\n    if(err) { console.log(err);\n      return handleError(res, err); }\n      return res.status(200).json(wishes);\n    });\n};\n\nexports.createAccomodation = function(req, res) {\n\n  Accomodation.create(req.body, function(err, registry) {\n    if(err) { return handleError(res, err); }\n    \n    return res.status(201).json(registry);\n  });\n};\n\nexports.indexAccomodation = function(req, res) {\n\n  Accomodation.find({registryId:req.params.id}).exec(function (err, accomodation) {\n    console.log(accomodation)\n    if(err) { console.log(err);\n      return handleError(res, err); }\n      return res.status(200).json(accomodation);\n    });\n};\n\nexports.createContribution = function(req, res) {\n\n  Contribution.create(req.body, function(err, registry) {\n    if(err) { return handleError(res, err); }\n    \n    return res.status(201).json(registry);\n  });\n};\n\nexports.indexContribution = function(req, res) {\n\n  Contribution.find({registryId:req.params.id}).exec(function (err, wishes) {\n    if(err) { console.log(err);\n      return handleError(res, err); }\n      return res.status(200).json(wishes);\n    });\n};\n\n\n\nfunction handleEntityNotFound(res) {\n  return function(entity) {\n    if (!entity) {\n      res.status(404).end();\n      return null;\n    }\n    return entity;\n  };\n}\n// Updates an existing product in the DB.\nexports.update = function(req, res) {\n\tif(req.body._id) { delete req.body._id; }\n // req.body.uid = req.user.email; // id change on every login hence email is used\n req.body.updated = Date.now();\n if(req.body.name)\n \treq.body.nameLower = req.body.name.toString().toLowerCase();\n if(!req.body.slug && req.body.name)\n \treq.body.slug = req.body.name.toString().toLowerCase()\n                      .replace(/\\s+/g, '-')        // Replace spaces with -\n                      .replace(/[^\\w\\-]+/g, '')   // Remove all non-word chars\n                      .replace(/\\-\\-+/g, '-')      // Replace multiple - with single -\n                      .replace(/^-+/, '')          // Trim - from start of text\n                      .replace(/-+$/, '');\n\n                      Registry.findById(req.params.id, function (err, registry) {\n                      \tif (err) { return handleError(res, err); }\n                      \tif(!registry) { return res.status(404).send('Not Found'); }\n                      \t\n                      \tvar updated = _.extend(registry, req.body);\n                      \t//console.log(updated);\n                      \tupdated.save(function (err) {\n                      \t\tif (err) { return handleError(res, err); }\n                      \t\treturn res.status(200).json(registry);\n                      \t});\n                      });\n                    };\n\n// Deletes a product from the DB.\nexports.destroy = function(req, res) {\n\tRegistry.findById(req.params.id, function (err, product) {\n\t\tif(err) { return handleError(res, err); }\n\t\tif(!product) { return res.status(404).send('Not Found'); }\n\t\tproduct.remove(function(err) {\n\t\t\tif(err) { return handleError(res, err); }\n\t\t\treturn res.status(204).send('No Content');\n\t\t});\n\t});\n};\n\nexports.search = function(req, res) {\n  var term = \"/\"+req.params.term+\"/\";\n  console.log(term)\n  Registry.find({ \"title\" : { $regex: /term/, $options: 'i' } }).exec(function(err, registries) { \n   if (err){\n    res.status(500).json(err);\n  } else {\n    console.log(registries)\n    res.status(200).json(registries);\n  }\n\n});\n};\n\nexports.updatePdtcnt =  function(req, res) {\n  var increment = {\n    $inc: {\n      'products.$.required': 1\n    }\n  };\n\n  console.log(req.params.id);\n  console.log(req.body._id);\n  var query = {\n    '_id': req.params.id,\n    'products._id': req.body._id\n\n  };\n\n  console.log(\"query\" + query);\n\n  Registry.update(query, increment, function(err,registry){\n    return res.status(201).json(registry);\n  });\n\n\n\n\n};\n\nexports.getRegistryProduct = function(req, res) {\n  var registryId = req.params.id;\n  var productId = req.body._id;\n  Registry.findOne({'products._id': productId}, {'products.$': 1}, function(err, product){\n    return res.status(201).json(product);\n  });\n};\n\n\n/*exports.getRegistryProduct = function(req, res){\n  var registryId = req.params.id;\n  var productId = req.body._id;\n    Registry.findById({registryId, 'products._id': productId}, {'products.$': 1}, function(err, product){\n      console.log(product)\n      return res.status(201).json(product);\n    }\n\n\n  };*/\n\n  exports.updateRegistryProduct = function(registryId, productId,quantity, email, name){\n\n\n    Registry.findOne({'products._id': productId}, {'products.$': 1}, function(err, registry){\n      var desiredQuantity = parseInt(registry.products[0].desired, 10) - parseInt(registry.products[0].required, 10)\n      if(quantity > desiredQuantity) {\n        quantity = desiredQuantity\n      }\n      var increment = {\n        $inc: {\n          'products.$.required': quantity\n        }\n      };\n      var query = {\n        '_id': registryId,\n        'products._id': productId\n\n      };\n\n\n      Registry.update(query, increment, function(err,registry){\n\n      });\n    });\n\n  }\n\n\n\n\n\n  function handleError(res, err) {\n   return res.status(500).send(err);\n }\n\n\n\n\n\n"]}