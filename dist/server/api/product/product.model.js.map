{"version":3,"sources":["../../../../server/api/product/product.model.js"],"names":[],"mappings":"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","file":"product.model.js","sourcesContent":["'use strict';\n\nvar mongoose = require('bluebird').promisifyAll(require('mongoose'));\nvar Schema = mongoose.Schema\nvar slugs = require('mongoose-url-slugs');\n\nvar ImageSchema = new Schema({\n  imageUrl: {\n    type: String\n  },\n  imageBin: {\n    data: Buffer,\n    contentType: String\n  },\n  featured: {\n    type: Boolean,\n    default: false\n  }\n});\n\nvar VariantSchema = new Schema({\n  code: {\n    type: String\n  },\n  price: {\n    type: Number,\n    min: 0\n  },\n  stock: {\n    type: Number,\n    min: 0\n  },\n  description: {\n    type: String\n  }\n});\n\nvar ReviewSchema = new Schema({\n  title: {\n    type: String,\n    required: true,\n    trim: true\n  },\n  content: {\n    type: String\n  },\n  by: {\n    type: String\n  },\n  rating: {\n    type: Number,\n    min: 1,\n    max: 5\n  },\n  posted: {\n    type: Date,\n    default: Date.now\n  }\n});\n\nvar ProductSchema = new Schema({\n  title: {\n    type: String,\n    required: true,\n    trim: true\n  },\n  code: {\n    type: String\n  },\n  price: {\n    type: Number,\n    required: true,\n    min: 0\n  },\n  stock: {\n    type: Number,\n    default: 1\n  },\n  featured: {\n    type: Boolean,\n    default: false\n  },\n  hot: {\n    type: Boolean,\n    default: false\n  },\n  new: {\n    type: Boolean,\n    default: false\n  },\n  imageUrl: {\n    type: String\n  },\n  imageBin: {\n    data: Buffer,\n    contentType: String\n  },\n  description: String,\n  images: [{\n    type: Schema.Types.ObjectId,\n    ref: 'Image',\n    index: true\n  }],\n  variants: [{\n    type: Schema.Types.ObjectId,\n    ref: 'Variant',\n    index: true\n  }],\n  reviews: [{\n    type: Schema.Types.ObjectId,\n    ref: 'Review',\n    index: true\n  }],\n  categories: [{\n    type: Schema.Types.ObjectId,\n    ref: 'Catalog',\n    index: true\n  }]\n}).index({\n  'title': 'text',\n  'description': 'text'\n});\n\nProductSchema.plugin(slugs('title'));\n\nmodule.exports = {\n  product: mongoose.model('Product', ProductSchema),\n  variant: mongoose.model('Variant', VariantSchema),\n  image: mongoose.model('Image', ImageSchema),\n  review: mongoose.model('Review', ReviewSchema)\n}\n"]}