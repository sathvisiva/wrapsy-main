{"version":3,"sources":["../../../../server/auth/google/passport.js"],"names":[],"mappings":";;;;;;;;;wBAAqB,UAAU;;;;mCACgB,uBAAuB;;AAE/D,SAAS,KAAK,CAAC,IAAI,EAAE,MAAM,EAAE;AAClC,wBAAS,GAAG,CAAC,wCAAmB;;AAE9B,YAAQ,EAAE,0EAA0E;;AAEpF,gBAAY,EAAE,0BAA0B;AACxC,eAAW,EAAE,MAAM,CAAC,MAAM,CAAC,WAAW;GACvC,EACD,UAAS,WAAW,EAAE,YAAY,EAAE,OAAO,EAAE,IAAI,EAAE;;AAEjD,QAAI,CAAC,YAAY,CAAC;AAChB,iBAAW,EAAE,OAAO,CAAC,EAAE;KACxB,CAAC,CACC,IAAI,CAAC,UAAA,IAAI,EAAI;AACZ,UAAI,IAAI,EAAE;;AAER,eAAO,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;OACzB;;AAED,UAAI,GAAG,IAAI,IAAI,CAAC;AACd,YAAI,EAAE,OAAO,CAAC,WAAW;AACzB,aAAK,EAAE,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,KAAK;AAC9B,YAAI,EAAE,MAAM;AACZ,gBAAQ,EAAE,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;AAC/C,gBAAQ,EAAE,QAAQ;AAClB,cAAM,EAAE,OAAO,CAAC,KAAK;OACtB,CAAC,CAAC;AACH,UAAI,CAAC,SAAS,EAAE,CACb,IAAI,CAAC,UAAA,IAAI,EAAI;;AAEb,eAAO,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,CAAA;OAC1B,CAAC,SACI,CAAC,UAAA,GAAG;eAAI,IAAI,CAAC,GAAG,CAAC;OAAA,CAAC,CAAC;KAC5B,CAAC,SACI,CAAC,UAAA,GAAG;aAAI,IAAI,CAAC,GAAG,CAAC;KAAA,CAAC,CAAC;GAC5B,CAAC,CAAC,CAAC;CACL","file":"passport.js","sourcesContent":["import passport from 'passport';\nimport {OAuth2Strategy as GoogleStrategy} from 'passport-google-oauth';\n\nexport function setup(User, config) {\n  passport.use(new GoogleStrategy({\n    //339525367862-c3dfgunh3i23csv6onvn5fetroboma85.apps.googleusercontent.com\n    clientID: \"339525367862-3d0leu38ihrp09oja6jqgdb98in1g6p0.apps.googleusercontent.com\",\n    //2t4rbI0fl9Rfu6ldH3v9xFnR\n    clientSecret: \"WvuIlCoYJZujMXvNXhGfdoUn\",\n    callbackURL: config.google.callbackURL\n  },\n  function(accessToken, refreshToken, profile, done) {\n\n    User.findOneAsync({\n      'google.id': profile.id\n    })\n      .then(user => {\n        if (user) {\n        \t\n          return done(null, user);\n        }\n\n        user = new User({\n          name: profile.displayName,\n          email: profile.emails[0].value,\n          role: 'user',\n          username: profile.emails[0].value.split('@')[0],\n          provider: 'google',\n          google: profile._json\n        });\n        user.saveAsync()\n          .then(user => {\n          \t\n          \treturn done(null, user[0])\n          })\n          .catch(err => done(err));\n      })\n      .catch(err => done(err));\n  }));\n}\n\n"]}